'use strict';

var obj = {};

obj.cityStorageKey = 'tn_select_city_cache';

obj.editorTitleKey = 'tn_editor_ecitor_title';
obj.editorParagraphKey = 'tn_editor_ecitor_paragraph';

obj.spaceChangeTag = 'tn_space_detail_change_tag';

obj.spaceSearchPOICache = 'tn_search_poi_space_history';
obj.squareSearchPOICache = 'tn_search_poi_square_history';
obj.spaceSearchContentCache = 'tn_search_content_space_history';
obj.squareSearchContentCache = 'tn_search_content_square_history';

obj.squareIconList = [{
  iconImg: '../../../images/tn-wx-pop-content-new.png',
  iconText: '写旅行心得',
  iconUrl: '../../editor/title-editor/index',
  isTab: false
}, {
  iconImg: '../../../images/tn-wx-pop-content-history.png',
  iconText: '历史发布',
  iconUrl: '',
  isTab: false
}];

obj.spaceIconLit = [{
  iconImg: '../../../images/tn-wx-pop-content-new.png',
  iconText: '写旅行心得',
  iconUrl: '../../editor/title-editor/index',
  isTab: false
}, {
  iconImg: '../../../images/tn-wx-pop-content-quote.png',
  iconText: '引用广场内容',
  iconUrl: '../../square/square-quote/index',
  isTab: false
}, {
  iconImg: '../../../images/tn-wx-pop-content-history.png',
  iconText: '历史发布/收藏',
  iconUrl: '',
  isTab: false
}];

/* 当前日期 ：星期N */
obj.getGreateWeek = function (date) {
  if (date) {
    var day = date.getDay();
    var week = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六");
    if (day >= 0 && day < 7) {
      return week[day];
    }
  }
  return null;
};

obj.getMonthYear = function (date) {
  var month = date.getMonth() + 1;
  var year = date.getFullYear();
  return month + '/' + year;
};

obj.getPVStr = function (pvCount) {
  var pvStr = '';
  if (pvCount > 10000) {
    pvStr = (pvCount / 10000.0).toFixed(2) + '\u4E07';
  } else {
    pvStr = '' + pvCount;
  }

  return pvStr;
};

// 选择标签处理逻辑，
obj.getSelectTagsInfo = function (tabs, selectTags, currentIndex, maxCount) {
  var currentSelect = tabs[currentIndex];

  if (currentSelect.isSelect === true) {
    // 如果已选择，则取消
    currentSelect.isSelect = false;
    tabs[currentIndex] = currentSelect;
    for (var i = selectTags.length - 1; i >= 0; i--) {
      var temp = selectTags[i];
      if (temp.id === currentSelect.id) {
        selectTags.splice(i, 1);
      }
    }
  } else if (selectTags.length === maxCount) {
    // 如果未选择，但是已选择超过maxCount个，提示
    wx.showToast({
      title: '\u6700\u591A\u9009\u62E9' + maxCount + '\u4E2A\u54E6\uFF5E',
      icon: 'none',
      duration: 2000
    });
  } else {
    // 否则，取消
    currentSelect.isSelect = true;
    tabs[currentIndex] = currentSelect;
    selectTags.push(currentSelect);
  }

  return { tabs: tabs, selectTags: selectTags };
};

// 重新构建已选择城市
obj.reContructSelectCitys = function (citys, newItem, judgementCallback) {
  citys = this.deleteCityFromArray(citys, newItem, judgementCallback);
  citys.push(newItem);

  return citys;
};

// 删除城市
obj.deleteCityFromArray = function (citys, deleteItem, judgementCallback) {
  var currentIndex = -1;
  citys.forEach(function (item, index) {
    if (judgementCallback(item, deleteItem)) {
      currentIndex = index;
    }
  });

  if (currentIndex !== -1) {
    citys.splice(currentIndex, 1);
  }
  return citys;
};

obj.getEffectiveIndex = function (currentIndex, totalCount) {
  return currentIndex >= totalCount ? totalCount - 1 : currentIndex;
};

module.exports = obj;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbIm9iaiIsImNpdHlTdG9yYWdlS2V5IiwiZWRpdG9yVGl0bGVLZXkiLCJlZGl0b3JQYXJhZ3JhcGhLZXkiLCJzcGFjZUNoYW5nZVRhZyIsInNwYWNlU2VhcmNoUE9JQ2FjaGUiLCJzcXVhcmVTZWFyY2hQT0lDYWNoZSIsInNwYWNlU2VhcmNoQ29udGVudENhY2hlIiwic3F1YXJlU2VhcmNoQ29udGVudENhY2hlIiwic3F1YXJlSWNvbkxpc3QiLCJpY29uSW1nIiwiaWNvblRleHQiLCJpY29uVXJsIiwiaXNUYWIiLCJzcGFjZUljb25MaXQiLCJnZXRHcmVhdGVXZWVrIiwiZGF0ZSIsImRheSIsImdldERheSIsIndlZWsiLCJBcnJheSIsImdldE1vbnRoWWVhciIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJnZXRQVlN0ciIsInB2Q291bnQiLCJwdlN0ciIsInRvRml4ZWQiLCJnZXRTZWxlY3RUYWdzSW5mbyIsInRhYnMiLCJzZWxlY3RUYWdzIiwiY3VycmVudEluZGV4IiwibWF4Q291bnQiLCJjdXJyZW50U2VsZWN0IiwiaXNTZWxlY3QiLCJpIiwibGVuZ3RoIiwidGVtcCIsImlkIiwic3BsaWNlIiwid3giLCJzaG93VG9hc3QiLCJ0aXRsZSIsImljb24iLCJkdXJhdGlvbiIsInB1c2giLCJyZUNvbnRydWN0U2VsZWN0Q2l0eXMiLCJjaXR5cyIsIm5ld0l0ZW0iLCJqdWRnZW1lbnRDYWxsYmFjayIsImRlbGV0ZUNpdHlGcm9tQXJyYXkiLCJkZWxldGVJdGVtIiwiZm9yRWFjaCIsIml0ZW0iLCJpbmRleCIsImdldEVmZmVjdGl2ZUluZGV4IiwidG90YWxDb3VudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsTUFBTSxFQUFWOztBQUVBQSxJQUFJQyxjQUFKLEdBQXFCLHNCQUFyQjs7QUFFQUQsSUFBSUUsY0FBSixHQUFxQix3QkFBckI7QUFDQUYsSUFBSUcs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Z0JBQWdCeUIsVUFBaEIsR0FBNkJBLGFBQWEsQ0FBMUMsR0FBOEN6QixZQUFyRDtBQUNELENBRkQ7O0FBSUEwQixPQUFPQyxPQUFQLEdBQWlCNUQsR0FBakIiLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgb2JqID0ge31cblxub2JqLmNpdHlTdG9yYWdlS2V5ID0gJ3RuX3NlbGVjdF9jaXR5X2NhY2hlJ1xuXG5vYmouZWRpdG9yVGl0bGVLZXkgPSAndG5fZWRpdG9yX2VjaXRvcl90aXRsZSdcbm9iai5lZGl0b3JQYXJhZ3JhcGhLZXkgPSAndG5fZWRpdG9yX2VjaXRvcl9wYXJhZ3JhcGgnXG5cbm9iai5zcGFjZUNoYW5nZVRhZyA9ICd0bl9zcGFjZV9kZXRhaWxfY2hhbmdlX3RhZydcblxub2JqLnNwYWNlU2VhcmNoUE9JQ2FjaGUgPSAndG5fc2VhcmNoX3BvaV9zcGFjZV9oaXN0b3J5J1xub2JqLnNxdWFyZVNlYXJjaFBPSUNhY2hlID0gJ3RuX3NlYXJjaF9wb2lfc3F1YXJlX2hpc3RvcnknXG5vYmouc3BhY2VTZWFyY2hDb250ZW50Q2FjaGUgPSAndG5fc2VhcmNoX2NvbnRlbnRfc3BhY2VfaGlzdG9yeSdcbm9iai5zcXVhcmVTZWFyY2hDb250ZW50Q2FjaGUgPSAndG5fc2VhcmNoX2NvbnRlbnRfc3F1YXJlX2hpc3RvcnknXG5cbm9iai5zcXVhcmVJY29uTGlzdCA9IFtcbiAge1xuICAgIGljb25JbWc6ICcuLi8uLi8uLi9pbWFnZXMvdG4td3gtcG9wLWNvbnRlbnQtbmV3LnBuZycsXG4gICAgaWNvblRleHQ6ICflhpnml4XooYzlv4PlvpcnLFxuICAgIGljb25Vcmw6ICcuLi8uLi9lZGl0b3IvdGl0bGUtZWRpdG9yL2luZGV4JyxcbiAgICBpc1RhYjogZmFsc2VcbiAgfSxcbiAge1xuICAgIGljb25JbWc6ICcuLi8uLi8uLi9pbWFnZXMvdG4td3gtcG9wLWNvbnRlbnQtaGlzdG9yeS5wbmcnLFxuICAgIGljb25UZXh0OiAn5Y6G5Y+y5Y+R5biDJyxcbiAgICBpY29uVXJsOiAnJyxcbiAgICBpc1RhYjogZmFsc2VcbiAgfVxuXVxuXG5vYmouc3BhY2VJY29uTGl0ID0gW1xuICB7XG4gICAgaWNvbkltZzogJy4uLy4uLy4uL2ltYWdlcy90bi13eC1wb3AtY29udGVudC1uZXcucG5nJyxcbiAgICBpY29uVGV4dDogJ+WGmeaXheihjOW/g+W+lycsXG4gICAgaWNvblVybDogJy4uLy4uL2VkaXRvci90aXRsZS1lZGl0b3IvaW5kZXgnLFxuICAgIGlzVGFiOiBmYWxzZVxuICB9LFxuICB7XG4gICAgaWNvbkltZzogJy4uLy4uLy4uL2ltYWdlcy90bi13eC1wb3AtY29udGVudC1xdW90ZS5wbmcnLFxuICAgIGljb25UZXh0OiAn5byV55So5bm/5Zy65YaF5a65JyxcbiAgICBpY29uVXJsOiAnLi4vLi4vc3F1YXJlL3NxdWFyZS1xdW90ZS9pbmRleCcsXG4gICAgaXNUYWI6IGZhbHNlXG4gIH0sXG4gIHtcbiAgICBpY29uSW1nOiAnLi4vLi4vLi4vaW1hZ2VzL3RuLXd4LXBvcC1jb250ZW50LWhpc3RvcnkucG5nJyxcbiAgICBpY29uVGV4dDogJ+WOhuWPsuWPkeW4gy/mlLbol48nLFxuICAgIGljb25Vcmw6ICcnLFxuICAgIGlzVGFiOiBmYWxzZVxuICB9XG5dXG5cbi8qIOW9k+WJjeaXpeacnyDvvJrmmJ/mnJ9OICovXG5vYmouZ2V0R3JlYXRlV2VlayA9IGZ1bmN0aW9uIChkYXRlKSB7XG4gIGlmIChkYXRlKSB7XG4gICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KClcbiAgICB2YXIgd2VlayA9IG5ldyBBcnJheShcIuaYn+acn+aXpVwiLCBcIuaYn+acn+S4gFwiLCBcIuaYn+acn+S6jFwiLCBcIuaYn+acn+S4iVwiLCBcIuaYn+acn+Wbm1wiLCBcIuaYn+acn+S6lFwiLCBcIuaYn+acn+WFrVwiKVxuICAgIGlmIChkYXkgPj0gMCAmJiBkYXkgPCA3KSB7XG4gICAgICByZXR1cm4gd2Vla1tkYXldXG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbm9iai5nZXRNb250aFllYXIgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxXG4gIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpXG4gIHJldHVybiBtb250aCArICcvJyArIHllYXJcbn1cblxuXG5vYmouZ2V0UFZTdHIgPSBmdW5jdGlvbiAocHZDb3VudCkge1xuICBsZXQgcHZTdHIgPSAnJ1xuICBpZiAocHZDb3VudCA+IDEwMDAwKSB7XG4gICAgcHZTdHIgPSBgJHsocHZDb3VudCAvIDEwMDAwLjApLnRvRml4ZWQoMil95LiHYFxuICB9IGVsc2Uge1xuICAgIHB2U3RyID0gYCR7cHZDb3VudH1gXG4gIH1cblxuICByZXR1cm4gcHZTdHJcbn1cblxuLy8g6YCJ5oup5qCH562+5aSE55CG6YC76L6R77yMXG5vYmouZ2V0U2VsZWN0VGFnc0luZm8gPSBmdW5jdGlvbiAodGFicywgc2VsZWN0VGFncywgY3VycmVudEluZGV4LCBtYXhDb3VudCkge1xuICBsZXQgY3VycmVudFNlbGVjdCA9IHRhYnNbY3VycmVudEluZGV4XVxuXG4gIGlmIChjdXJyZW50U2VsZWN0LmlzU2VsZWN0ID09PSB0cnVlKSB7IC8vIOWmguaenOW3sumAieaLqe+8jOWImeWPlua2iFxuICAgIGN1cnJlbnRTZWxlY3QuaXNTZWxlY3QgPSBmYWxzZVxuICAgIHRhYnNbY3VycmVudEluZGV4XSA9IGN1cnJlbnRTZWxlY3RcbiAgICBmb3IgKGxldCBpID0gc2VsZWN0VGFncy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgbGV0IHRlbXAgPSBzZWxlY3RUYWdzW2ldXG4gICAgICBpZiAodGVtcC5pZCA9PT0gY3VycmVudFNlbGVjdC5pZCkge1xuICAgICAgICBzZWxlY3RUYWdzLnNwbGljZShpLCAxKVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChzZWxlY3RUYWdzLmxlbmd0aCA9PT0gbWF4Q291bnQpIHsgLy8g5aaC5p6c5pyq6YCJ5oup77yM5L2G5piv5bey6YCJ5oup6LaF6L+HbWF4Q291bnTkuKrvvIzmj5DnpLpcbiAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgdGl0bGU6IGDmnIDlpJrpgInmi6kke21heENvdW50feS4quWTpu+9nmAsXG4gICAgICBpY29uOiAnbm9uZScsXG4gICAgICBkdXJhdGlvbjogMjAwMFxuICAgIH0pXG4gIH0gZWxzZSB7ICAvLyDlkKbliJnvvIzlj5bmtohcbiAgICBjdXJyZW50U2VsZWN0LmlzU2VsZWN0ID0gdHJ1ZVxuICAgIHRhYnNbY3VycmVudEluZGV4XSA9IGN1cnJlbnRTZWxlY3RcbiAgICBzZWxlY3RUYWdzLnB1c2goY3VycmVudFNlbGVjdClcbiAgfVxuXG4gIHJldHVybiB7dGFicywgc2VsZWN0VGFnc31cbn1cblxuLy8g6YeN5paw5p6E5bu65bey6YCJ5oup5Z+O5biCXG5vYmoucmVDb250cnVjdFNlbGVjdENpdHlzID0gZnVuY3Rpb24oY2l0eXMsIG5ld0l0ZW0sIGp1ZGdlbWVudENhbGxiYWNrKSB7XG4gIGNpdHlzID0gdGhpcy5kZWxldGVDaXR5RnJvbUFycmF5KGNpdHlzLCBuZXdJdGVtLCBqdWRnZW1lbnRDYWxsYmFjaylcbiAgY2l0eXMucHVzaChuZXdJdGVtKVxuXG4gIHJldHVybiBjaXR5c1xufVxuXG4vLyDliKDpmaTln47luIJcbm9iai5kZWxldGVDaXR5RnJvbUFycmF5ID0gZnVuY3Rpb24oY2l0eXMsIGRlbGV0ZUl0ZW0sIGp1ZGdlbWVudENhbGxiYWNrKSB7XG4gIGxldCBjdXJyZW50SW5kZXggPSAtMVxuICBjaXR5cy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGlmIChqdWRnZW1lbnRDYWxsYmFjayhpdGVtLCBkZWxldGVJdGVtKSkge1xuICAgICAgY3VycmVudEluZGV4ID0gaW5kZXhcbiAgICB9XG4gIH0pXG5cbiAgaWYgKGN1cnJlbnRJbmRleCAhPT0gLTEpIHtcbiAgICBjaXR5cy5zcGxpY2UoY3VycmVudEluZGV4LCAxKVxuICB9XG4gIHJldHVybiBjaXR5c1xufVxuXG5vYmouZ2V0RWZmZWN0aXZlSW5kZXggPSBmdW5jdGlvbihjdXJyZW50SW5kZXgsIHRvdGFsQ291bnQpIHtcbiAgcmV0dXJuIGN1cnJlbnRJbmRleCA+PSB0b3RhbENvdW50ID8gdG90YWxDb3VudCAtIDEgOiBjdXJyZW50SW5kZXhcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvYmpcbiJdfQ==